import{_ as e}from"../TableData/TableData.bf91a0fc.js";import{R as l,_ as a}from"../../assets/index.3788c556.js";import{d as o,r as t,M as s,aD as d,aE as n,b as u,w as r,aF as i,aG as m,o as p,e as c,j as h,l as f,at as w,x as v,z as M,J as b,i as _,f as g,ag as y,ah as U,am as C,an as k,ae as S}from"../.pnpm/.pnpm.38b82a0b.js";const T=o({props:{title:{default:"Hi，我是标题",type:String},cssStyle:{default:"width:567px;",type:String},toModel:{default:null,type:Object},toUrl:{default:"",type:String},showModal:{default:!1,type:Boolean},isCustomSubmit:{default:!1,type:Boolean}},setup(e,a){let o=t(""),u=t({}),r=t(!1),i=t(!1);o.value=e.toUrl,u.value=e.toModel,r.value=e.showModal,s((()=>e.showModal),(e=>{r.value=e})),s(r,(e=>{a.emit("update:showModal",e)}));const m=d((async()=>{if(i.value=!0,e.isCustomSubmit)a.emit("onSubmit",e.toModel);else{if(!e.toUrl)return i.value=!1,window.$message.error("请传递参数toUrl");const{data:a}=await l.post(e.toUrl,e.toModel);a&&(window.$message.success(a.msg),r.value=!1)}i.value=!1}),2e3,{leading:!0,trailing:!1});return n((()=>{m.cancel()})),{loading:i,toUrl:o,toModel:u,showModal:r,submitFunc:m}},methods:{close(){if(this.loading)return!1;this.showModal=!1}}}),x={class:"custom-card"};const j=a(o({name:"Admin",components:{TableData:e,formModal:a(T,[["render",function(e,l,a,o,t,s){const d=v,n=M,b=m;return p(),u(b,{show:e.showModal,"onUpdate:show":l[0]||(l[0]=l=>e.showModal=l),"close-on-esc":!1,"mask-closable":!1,preset:"card",title:e.title,bordered:!1,style:i(e.cssStyle),onClose:e.close},{footer:r((()=>[c(n,null,{default:r((()=>[c(d,{onClick:e.close,strong:"",secondary:""},{default:r((()=>[h("取消")])),_:1},8,["onClick"]),c(d,{strong:"",secondary:"",type:"primary",onClick:e.submitFunc,loading:e.loading},{default:r((()=>[h("创建")])),_:1},8,["onClick","loading"])])),_:1})])),default:r((()=>[f("div",x,[w(e.$slots,"default")])])),_:3},8,["show","title","style","onClose"])}]])},setup(){let e=b({phone:"",username:"",adminGroupId:null});const l=b({});return{search:e,showModal:t(!1),model:l,formModelTitle:"用户信息",url:"admin/api/admin/create-update"}},methods:{async view(e){const{data:l}=await this.$http.get("admin/api/admin/view?id="+e.id);l&&(this.model=l,this.showModal=!0,this.formModelTitle=l.username)},edit(e){},create(){this.model={},this.showModal=!0,this.formModelTitle="创建用户"}}}),[["render",function(l,a,o,t,s,d){const n=v,u=y,i=e,m=U,f=C,w=k,M=S,b=g("formModal");return p(),_("div",null,[c(i,{subHeight:240,search:l.search,ref:"tables",onView:l.view,onEdit:l.edit,url:"admin/api/admin/index",handle:l._handleBtn},{btn:r((()=>[c(n,{quaternary:"",onClick:l.create},{default:r((()=>[h("创建")])),_:1},8,["onClick"])])),default:r((()=>[c(u,{value:l.search.phone,"onUpdate:value":a[0]||(a[0]=e=>l.search.phone=e),filterable:"",placeholder:"手机号码"},null,8,["value"]),c(u,{value:l.search.username,"onUpdate:value":a[1]||(a[1]=e=>l.search.username=e),filterable:"",placeholder:"用户名"},null,8,["value"])])),_:1},8,["search","onView","onEdit","handle"]),c(b,{ref:"formModal",showModal:l.showModal,"onUpdate:showModal":a[8]||(a[8]=e=>l.showModal=e),toModel:l.model,toUrl:l.url,title:l.formModelTitle},{default:r((()=>[c(M,{ref:"formRef",model:l.model,"label-placement":"top","label-width":"auto","require-mark-placement":"right-hanging"},{default:r((()=>[c(w,{"x-gap":24,"y-gap":12,cols:3},{default:r((()=>[c(f,null,{default:r((()=>[c(m,{label:"账户"},{default:r((()=>[c(u,{value:l.model.phone,"onUpdate:value":a[2]||(a[2]=e=>l.model.phone=e),placeholder:"请输入电话号码"},null,8,["value"])])),_:1})])),_:1}),c(f,null,{default:r((()=>[c(m,{label:"密码"},{default:r((()=>[c(u,{type:"password",value:l.model.password,"onUpdate:value":a[3]||(a[3]=e=>l.model.password=e),autocomplete:"new-password",placeholder:"请输入电话号码"},null,8,["value"])])),_:1})])),_:1}),c(f,null,{default:r((()=>[c(m,{label:"重复密码"},{default:r((()=>[c(u,{value:l.model.passwordConfirm,"onUpdate:value":a[4]||(a[4]=e=>l.model.passwordConfirm=e),autocomplete:"new-password",type:"password",placeholder:"请输入电话号码"},null,8,["value"])])),_:1})])),_:1}),c(f,null,{default:r((()=>[c(m,{label:"姓名"},{default:r((()=>[c(u,{value:l.model.name,"onUpdate:value":a[5]||(a[5]=e=>l.model.name=e),placeholder:"请输入电话号码"},null,8,["value"])])),_:1})])),_:1}),c(f,null,{default:r((()=>[c(m,{label:"昵称"},{default:r((()=>[c(u,{value:l.model.username,"onUpdate:value":a[6]||(a[6]=e=>l.model.username=e),placeholder:"请输入电话号码"},null,8,["value"])])),_:1})])),_:1}),c(f,null,{default:r((()=>[c(m,{label:"邮箱"},{default:r((()=>[c(u,{value:l.model.email,"onUpdate:value":a[7]||(a[7]=e=>l.model.email=e),placeholder:"请输入电话号码"},null,8,["value"])])),_:1})])),_:1})])),_:1}),c(m,{label:"所属部门"})])),_:1},8,["model"])])),_:1},8,["showModal","toModel","toUrl","title"])])}]]);export{j as default};
