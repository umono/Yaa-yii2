import{_ as v}from"./TableData.34f56b6c.js";import{R as C,_ as g}from"./index.19b55c5b.js";import{d as F,r as m,B as w,am as U,an as $,b as k,w as a,ao as E,ap as S,o as M,e as o,j as h,l as T,a8 as A,q as B,t as q,y as c,i as V,f as H,a2 as N,a3 as R,aq as j,ar as I,a0 as z}from"./vendor.ea902574.js";const G=F({props:{title:{default:"Hi\uFF0C\u6211\u662F\u6807\u9898",type:String},cssStyle:{default:"width:567px;",type:String},toModel:{default:null,type:Object},toUrl:{default:"",type:String},showModal:{default:!1,type:Boolean},isCustomSubmit:{default:!1,type:Boolean}},setup(e,l){let p=m(""),f=m({}),s=m(!1),r=m(!1);p.value=e.toUrl,f.value=e.toModel,s.value=e.showModal,w(()=>e.showModal,u=>{s.value=u}),w(s,u=>{l.emit("update:showModal",u)});const d=U(async()=>{if(r.value=!0,e.isCustomSubmit)l.emit("onSubmit",e.toModel);else{if(!e.toUrl)return r.value=!1,window.$message.error("\u8BF7\u4F20\u9012\u53C2\u6570toUrl");const{data:u}=await C.post(e.toUrl,e.toModel);u&&(window.$message.success(u.msg),s.value=!1)}r.value=!1},2e3,{leading:!0,trailing:!1});return $(()=>{d.cancel()}),{loading:r,toUrl:p,toModel:f,showModal:s,submitFunc:d}},methods:{close(){if(this.loading)return!1;this.showModal=!1}}}),O={class:"custom-card"};function J(e,l,p,f,s,r){const d=B,u=q,_=S;return M(),k(_,{show:e.showModal,"onUpdate:show":l[0]||(l[0]=t=>e.showModal=t),"close-on-esc":!1,"mask-closable":!1,preset:"card",title:e.title,bordered:!1,style:E(e.cssStyle),onClose:e.close},{footer:a(()=>[o(u,null,{default:a(()=>[o(d,{onClick:e.close,strong:"",secondary:""},{default:a(()=>[h("\u53D6\u6D88")]),_:1},8,["onClick"]),o(d,{strong:"",secondary:"",type:"primary",onClick:e.submitFunc,loading:e.loading},{default:a(()=>[h("\u521B\u5EFA")]),_:1},8,["onClick","loading"])]),_:1})]),default:a(()=>[T("div",O,[A(e.$slots,"default")])]),_:3},8,["show","title","style","onClose"])}const K=g(G,[["render",J]]),L=F({name:"Admin",components:{TableData:v,formModal:K},setup(){let e=c({phone:"",username:"",adminGroupId:null});const l=c({});return{search:e,showModal:m(!1),model:l,formModelTitle:"\u7528\u6237\u4FE1\u606F",url:"admin/api/admin/create-update"}},methods:{async view(e){const{data:l}=await this.$http.get("admin/api/admin/view?id="+e.id);l&&(this.model=l,this.showModal=!0,this.formModelTitle=l.username)},edit(e){console.log("edit",e)},create(){this.model={},this.showModal=!0,this.formModelTitle="\u521B\u5EFA\u7528\u6237"}}});function P(e,l,p,f,s,r){const d=B,u=N,_=v,t=R,i=j,b=I,y=z,D=H("formModal");return M(),V("div",null,[o(_,{subHeight:240,search:e.search,ref:"tables",onView:e.view,onEdit:e.edit,url:"admin/api/admin/index",handle:e._handleBtn},{btn:a(()=>[o(d,{quaternary:"",onClick:e.create},{default:a(()=>[h("\u521B\u5EFA")]),_:1},8,["onClick"])]),default:a(()=>[o(u,{value:e.search.phone,"onUpdate:value":l[0]||(l[0]=n=>e.search.phone=n),filterable:"",placeholder:"\u624B\u673A\u53F7\u7801"},null,8,["value"]),o(u,{value:e.search.username,"onUpdate:value":l[1]||(l[1]=n=>e.search.username=n),filterable:"",placeholder:"\u7528\u6237\u540D"},null,8,["value"])]),_:1},8,["search","onView","onEdit","handle"]),o(D,{ref:"formModal",showModal:e.showModal,"onUpdate:showModal":l[8]||(l[8]=n=>e.showModal=n),toModel:e.model,toUrl:e.url,title:e.formModelTitle},{default:a(()=>[o(y,{ref:"formRef",model:e.model,"label-placement":"top","label-width":"auto","require-mark-placement":"right-hanging"},{default:a(()=>[o(b,{"x-gap":24,"y-gap":12,cols:3},{default:a(()=>[o(i,null,{default:a(()=>[o(t,{label:"\u8D26\u6237"},{default:a(()=>[o(u,{value:e.model.phone,"onUpdate:value":l[2]||(l[2]=n=>e.model.phone=n),placeholder:"\u8BF7\u8F93\u5165\u7535\u8BDD\u53F7\u7801"},null,8,["value"])]),_:1})]),_:1}),o(i,null,{default:a(()=>[o(t,{label:"\u5BC6\u7801"},{default:a(()=>[o(u,{type:"password",value:e.model.password,"onUpdate:value":l[3]||(l[3]=n=>e.model.password=n),autocomplete:"new-password",placeholder:"\u8BF7\u8F93\u5165\u7535\u8BDD\u53F7\u7801"},null,8,["value"])]),_:1})]),_:1}),o(i,null,{default:a(()=>[o(t,{label:"\u91CD\u590D\u5BC6\u7801"},{default:a(()=>[o(u,{value:e.model.passwordConfirm,"onUpdate:value":l[4]||(l[4]=n=>e.model.passwordConfirm=n),autocomplete:"new-password",type:"password",placeholder:"\u8BF7\u8F93\u5165\u7535\u8BDD\u53F7\u7801"},null,8,["value"])]),_:1})]),_:1}),o(i,null,{default:a(()=>[o(t,{label:"\u59D3\u540D"},{default:a(()=>[o(u,{value:e.model.name,"onUpdate:value":l[5]||(l[5]=n=>e.model.name=n),placeholder:"\u8BF7\u8F93\u5165\u7535\u8BDD\u53F7\u7801"},null,8,["value"])]),_:1})]),_:1}),o(i,null,{default:a(()=>[o(t,{label:"\u6635\u79F0"},{default:a(()=>[o(u,{value:e.model.username,"onUpdate:value":l[6]||(l[6]=n=>e.model.username=n),placeholder:"\u8BF7\u8F93\u5165\u7535\u8BDD\u53F7\u7801"},null,8,["value"])]),_:1})]),_:1}),o(i,null,{default:a(()=>[o(t,{label:"\u90AE\u7BB1"},{default:a(()=>[o(u,{value:e.model.email,"onUpdate:value":l[7]||(l[7]=n=>e.model.email=n),placeholder:"\u8BF7\u8F93\u5165\u7535\u8BDD\u53F7\u7801"},null,8,["value"])]),_:1})]),_:1})]),_:1}),o(t,{label:"\u6240\u5C5E\u90E8\u95E8"})]),_:1},8,["model"])]),_:1},8,["showModal","toModel","toUrl","title"])])}const Y=g(L,[["render",P]]);export{Y as default};
